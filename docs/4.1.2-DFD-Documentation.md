# 4.1.2 Data Flow Diagrams (DFD)
## AI-Powered Mobile Marketplace System

---

## Table of Contents
1. [DFD Level 0 (Context Diagram)](#dfd-level-0-context-diagram)
2. [DFD Level 1 (Detailed Processes)](#dfd-level-1-detailed-processes)
3. [Data Flow Descriptions](#data-flow-descriptions)
4. [Data Store Descriptions](#data-store-descriptions)
5. [Process Descriptions](#process-descriptions)

---

## DFD Level 0 (Context Diagram)

### Diagram Overview

```
                            ┌───────────────┐
                            │  AI Services  │
                            └───────┬───────┘
                                    │
                              AI models
                                    │
                                    ▼
  ┌────────────┐         Login/register
  │            │      ◄─────────────────┐
  │  Customers │                        │
  │            │         Response        │
  └────────────┘      ─────────────────►│
        │ ▲                              │
        │ │                              │
    Query│ │Response                     │
        │ │                         ┌────┴─────┐
        ▼ │                         │          │
  ┌────────────┐                    │    AI-   │      Product data
  │            │      Product       │ Powered  │◄────────────────
  │            │       listing      │  Mobile  │
  │            │ ─────────────────► │  Market- │
  │            │                    │  place   │      Product info
  │            │      Payment       │          ├────────────────►
  │  Sellers   │ ◄───────────────── │          │
  │            │                    │ (System) │
  └────────────┘      Listing       │          │      Payment
        │          ─────────────────►│          ├────────────────►
        │                            │          │
        │                            │          │    Confirmation
        │                            │          │◄────────────────
        │                            └────┬─────┘
        │                                 │
        │                                 │
        │                                 ▼
        │                         ┌───────────────┐
        │                         │    Payment    │
        │                         │    Gateway    │
        │                         └───────────────┘
        │
        │                         ┌───────────────┐
        └────────────────────────►│  External     │
                                  │     Data      │
                                  └───────────────┘
```

### External Entities

1. **Customers**
   - End users who browse, search, and purchase products
   - Interact with chatbot for queries
   - Write reviews and receive recommendations

2. **Sellers**
   - Vendors who list products
   - Manage inventory and orders
   - Undergo fraud detection checks

3. **AI Services**
   - External AI/ML models
   - Provides comparison, recommendation, NLP, and sentiment analysis
   - Includes review summarization capabilities

4. **External Data**
   - Third-party product information sources
   - Market pricing data
   - Product specifications databases

5. **Payment Gateway**
   - External payment processing systems
   - Handles secure transactions
   - Provides payment confirmations

### Data Flows (Level 0)

| From | To | Data Flow Name | Description |
|------|-----|----------------|-------------|
| Customers | System | Login/Register | User authentication credentials |
| Customers | System | Query | Product search and chatbot queries |
| System | Customers | Response | Search results, recommendations, chatbot responses |
| Sellers | System | Listing | Product information for listing |
| Sellers | System | Verify Seller | Seller verification documents |
| System | Sellers | Payment | Order payments to sellers |
| System | AI Services | AI Models | Product data for AI processing |
| AI Services | System | AI Insights | Recommendations, summaries, sentiment scores |
| External Data | System | Product Data | External product information |
| System | External Data | Product Info | Request for external data |
| System | Payment Gateway | Payment | Payment transaction data |
| Payment Gateway | System | Confirmation | Payment confirmation |

---

## DFD Level 1 (Detailed Processes)

### Diagram Overview

```
                                ┌───────────────┐
                                │  AI Services  │
                                └───────┬───────┘
                                        │
                                   AI models
                                        │
                                        ▼
┌────────────┐ Login/register   ┌─────────────┐
│            │─────────────────►│    1.0      │
│  Customers │                  │    User     │
│            │◄─────────────────│  Management │
└────────────┘   Auth token     └──────┬──────┘
      │ ▲                              │
      │ │                              │ User data
      │ │                              ▼
      │ │                       ┌─────────────┐
      │ │                       │     D2      │
      │ │                       │    User     │
      │ │                       │  Database   │
      │ │                       └─────────────┘
      │ │
      │ │Response          
      │ │                       ┌─────────────┐
      │ │      ◄────────────────│    8.0      │
      │ │         Insights      │    NLP      │
      │ └───────────────────────│  Chatbot    │
      │            Query        └─────────────┘
      │
      │                         ┌─────────────┐      Product data
      │                         │    2.0      │◄────────────────
      │                         │    Data     │
      │                         │ Integration │      Product info
      │                         └──────┬──────┘─────────────────►
      │                                │
      │                                │ Product info
      │                                ▼
      │                         ┌─────────────┐
      │                         │     D1      │
      │                         │   Product   │
      │                         │  Database   │
      │                         └──────┬──────┘
      │                                │
      │                                │ Product data
      │                                │
      ├────────────────────────────────┼────────────────┐
      │                                │                │
      │                                ▼                │
      │                         ┌─────────────┐         │
      │         Response        │    3.0      │         │
      └────────────────────────►│     AI      │         │
                                │ Comparison &│         │
                                │Recommendation│         │
                                └─────────────┘         │
                                                        │
                                                        │
┌────────────┐                  ┌─────────────┐         │
│            │     Reviews      │    4.0      │         │
│  Customers │─────────────────►│   Review    │         │
│            │                  │Summarization│         │
└────────────┘                  └──────┬──────┘         │
      │                                │                │
      │                                │ Reviews        │
      │                                ▼                │
      │                         ┌─────────────┐         │
      │                         │             │         │
      │                         │   Product   │◄────────┘
      │                         │  Database   │
      │                         │             │
      │                         └─────────────┘
      │
      │
      │                         ┌─────────────┐
      │         Product         │    5.0      │
      │         listing         │   Seller    │
      │         ────────────────┤  Management │
      │                         └──────┬──────┘
┌────────────┐                         │
│            │                         │ Listing
│  Sellers   │                         ▼
│            │                  ┌─────────────┐
└────────────┘                  │   Product   │
      │                         │  Database   │
      │                         └─────────────┘
      │                                │
      │                                │ Verify seller
      │                                ▼
      │                         ┌─────────────┐
      │      Listing            │    6.0      │
      └────────────────────────►│    Fraud    │
                                │  Detection  │
                   Status       └──────┬──────┘
                  ◄─────────────────   │
                                       │
                                       │
                                       ▼
                                ┌─────────────┐      Payment
                                │    7.0      │◄────────────────
                                │Transaction  │
                                │ Management  │   Confirmation
                                └──────┬──────┘─────────────────►
                                       │
                                       │ Log
                                       ▼
                                ┌─────────────┐
                                │     D3      │
                                │Transaction  │
                                │    Logs     │
                                └─────────────┘
                                       │
                                       │
                                       ▼
                                ┌─────────────┐
                                │   Payment   │
                                │   Gateway   │
                                └─────────────┘
```

---

## Process Descriptions

### Process 1.0: User Management

**Purpose**: Handle user authentication, registration, and profile management.

**Inputs**:
- Login/register credentials from Customers
- User profile updates

**Processing**:
- Validate user credentials
- Create new user accounts
- Generate and manage authentication tokens
- Update user profiles
- Store user data in User Database (D2)

**Outputs**:
- Authentication tokens to Customers
- User data to User Database (D2)
- User info to other processes

**Data Stores Used**:
- D2: User Database (Read/Write)

---

### Process 2.0: Data Integration

**Purpose**: Integrate and synchronize product data from external sources.

**Inputs**:
- Product data from External Data sources
- Product listing requests

**Processing**:
- Fetch external product information
- Validate and normalize data
- Enrich product listings with external data
- Update product database with integrated information

**Outputs**:
- Product info to External Data (requests)
- Product data to Product Database (D1)

**Data Stores Used**:
- D1: Product Database (Write)

---

### Process 3.0: AI Comparison and Recommendation

**Purpose**: Generate AI-powered product comparisons and personalized recommendations.

**Inputs**:
- Product data from Product Database (D1)
- User preferences and behavior
- AI models from AI Services

**Processing**:
- Analyze product features and specifications
- Compare products based on AI algorithms
- Generate personalized recommendations
- Calculate recommendation scores

**Outputs**:
- Product recommendations to Customers
- AI insights to various processes

**Data Stores Used**:
- D1: Product Database (Read)

---

### Process 4.0: Review Summarization

**Purpose**: Collect customer reviews and generate AI-powered summaries.

**Inputs**:
- Reviews from Customers
- Product data from Product Database (D1)

**Processing**:
- Store customer reviews
- Perform sentiment analysis
- Generate AI-powered review summaries
- Calculate aggregate ratings

**Outputs**:
- Review summaries to Customers
- Review data to Product Database (D1)

**Data Stores Used**:
- D1: Product Database (Read/Write)

---

### Process 5.0: Seller Management

**Purpose**: Manage seller accounts, product listings, and seller activities.

**Inputs**:
- Listing information from Sellers
- Seller registration data

**Processing**:
- Register new sellers
- Process product listings
- Manage seller profiles
- Update inventory

**Outputs**:
- Listing confirmations to Sellers
- Product data to Product Database (D1)
- Seller verification requests to Fraud Detection (6.0)

**Data Stores Used**:
- D1: Product Database (Write)
- D2: User Database (Write)

---

### Process 6.0: Fraud Detection

**Purpose**: Verify sellers and detect fraudulent activities.

**Inputs**:
- Verify seller requests from Seller Management (5.0)
- Transaction patterns
- Seller behavior data

**Processing**:
- Perform seller verification checks
- Analyze transaction patterns
- Calculate fraud risk scores
- Flag suspicious activities

**Outputs**:
- Verification status to Sellers
- Status updates to Seller Management (5.0)
- Fraud alerts to Transaction Management (7.0)

**Data Stores Used**:
- D2: User Database (Read)
- D3: Transaction Logs (Read)

---

### Process 7.0: Transaction Management

**Purpose**: Process orders, payments, and maintain transaction logs.

**Inputs**:
- Order data from Customers
- Payment confirmations from Payment Gateway
- Fraud status from Fraud Detection (6.0)

**Processing**:
- Create and manage orders
- Process payments through Payment Gateway
- Update order status
- Log all transactions
- Distribute payments to sellers

**Outputs**:
- Payment requests to Payment Gateway
- Payment confirmations to Customers
- Transaction logs to Transaction Logs (D3)
- Payments to Sellers

**Data Stores Used**:
- D3: Transaction Logs (Write)
- D1: Product Database (Read for stock updates)

---

### Process 8.0: NLP Chatbot

**Purpose**: Provide natural language query processing and customer support.

**Inputs**:
- Query messages from Customers
- Product data from Product Database (D1)
- User context from User Database (D2)

**Processing**:
- Parse natural language queries
- Extract user intent
- Search product database
- Generate contextual responses
- Log interactions

**Outputs**:
- Response messages to Customers
- Chatbot interaction logs

**Data Stores Used**:
- D1: Product Database (Read)
- D2: User Database (Read)

---

## Data Store Descriptions

### D1: Product Database

**Description**: Central repository for all product information.

**Contents**:
- Product details (name, description, price, specs)
- Product images and media
- Inventory/stock levels
- Product reviews and ratings
- AI scores and recommendations
- External data integration

**Access**:
- Read: Processes 3.0, 4.0, 7.0, 8.0
- Write: Processes 2.0, 4.0, 5.0, 7.0

---

### D2: User Database

**Description**: Stores all user account information.

**Contents**:
- User credentials and authentication data
- Customer profiles and preferences
- Seller profiles and business information
- Wishlist and loyalty points
- User activity history

**Access**:
- Read: Processes 3.0, 6.0, 8.0
- Write: Processes 1.0, 5.0

---

### D3: Transaction Logs

**Description**: Comprehensive audit trail of all financial transactions.

**Contents**:
- Order transactions
- Payment records
- Refund information
- Fraud detection scores
- Transaction timestamps and metadata

**Access**:
- Read: Process 6.0
- Write: Process 7.0

---

## Data Flow Descriptions

### Level 1 Data Flows

| Flow Name | Source | Destination | Description | Data Elements |
|-----------|--------|-------------|-------------|---------------|
| Login/register | Customers | 1.0 User Management | User authentication data | email, password, user_type |
| Auth token | 1.0 User Management | Customers | Authentication token | token, expiry |
| User data | 1.0 User Management | D2 User Database | User account information | user_id, profile_data |
| Query | Customers | 8.0 NLP Chatbot | Natural language queries | query_text, session_id |
| Response | 8.0 NLP Chatbot | Customers | Chatbot responses | response_text, intent |
| Insights | 8.0 NLP Chatbot | Customers | Product information | product_list, details |
| Product data | External Data | 2.0 Data Integration | External product info | specs, pricing, availability |
| Product info | 2.0 Data Integration | D1 Product Database | Integrated product data | product_id, external_data |
| Product info | 2.0 Data Integration | External Data | Data fetch requests | product_id, data_type |
| AI models | AI Services | 3.0 AI Comparison | AI processing models | model_version, algorithms |
| Product data | D1 Product Database | 3.0 AI Comparison | Products for comparison | product_list, specifications |
| Response | 3.0 AI Comparison | Customers | Recommendations | recommended_products, scores |
| Reviews | Customers | 4.0 Review Summarization | Customer reviews | review_text, rating, product_id |
| Reviews | 4.0 Review Summarization | D1 Product Database | Stored reviews | review_id, sentiment_score |
| Product listing | Sellers | 5.0 Seller Management | New product listings | product_details, images, price |
| Listing | 5.0 Seller Management | D1 Product Database | Product records | product_id, seller_id, data |
| Verify seller | 5.0 Seller Management | 6.0 Fraud Detection | Seller verification request | seller_id, business_info |
| Status | 6.0 Fraud Detection | Sellers | Verification result | status, fraud_score |
| Payment | 7.0 Transaction Management | Payment Gateway | Payment transaction | amount, payment_method |
| Confirmation | Payment Gateway | 7.0 Transaction Management | Payment result | transaction_id, status |
| Log | 7.0 Transaction Management | D3 Transaction Logs | Transaction records | log_entry, timestamp |

---

## Data Flow Consistency Rules

### Level 0 to Level 1 Decomposition

1. **Customer Interactions**:
   - Level 0: "Login/register" → Level 1: Decomposes into Process 1.0
   - Level 0: "Query" → Level 1: Decomposes into Process 8.0
   - Level 0: "Response" → Level 1: Comes from Processes 3.0 and 8.0

2. **Seller Interactions**:
   - Level 0: "Listing" → Level 1: Decomposes into Process 5.0
   - Level 0: "Payment" → Level 1: Comes from Process 7.0

3. **External Systems**:
   - Level 0: "AI models" → Level 1: Feeds into Processes 3.0, 4.0, 8.0
   - Level 0: "Product data" → Level 1: Handled by Process 2.0
   - Level 0: "Payment/Confirmation" → Level 1: Managed by Process 7.0

### Data Conservation

- All data flows entering the system in Level 0 must appear in Level 1
- All data flows leaving the system in Level 0 must originate from Level 1 processes
- Data stores in Level 1 must support all data persistence implied in Level 0

---

## System Boundaries

**Inside System Boundary**:
- All 8 processes (1.0 - 8.0)
- All data stores (D1, D2, D3)
- Internal data flows between processes

**Outside System Boundary**:
- Customers (external entity)
- Sellers (external entity)
- AI Services (external entity)
- External Data (external entity)
- Payment Gateway (external entity)

---

## Validation Checklist

✅ All processes have at least one input and one output  
✅ All data stores have at least one inflow and one outflow  
✅ Data flow labels are clear and descriptive  
✅ Processes are numbered logically  
✅ Level 0 and Level 1 are consistent  
✅ External entities do not directly interact with data stores  
✅ Data flows are unidirectional  
✅ No processes directly connected (data flows or stores between them)  

---

*This DFD documentation models the complete data flow structure of the AI-Powered Mobile Marketplace system from Level 0 (context) to Level 1 (detailed processes).*
